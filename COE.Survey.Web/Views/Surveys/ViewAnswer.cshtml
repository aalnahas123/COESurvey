@using COE.Common.Model

@model SurveyAnswer

@{
    ViewBag.Title = "Survey | " + Model.Survey.SurveyTitle;
    var dir = Model.Survey.IsRTL ? "right" : "left";
    var completeBtnPos = Model.Survey.IsRTL ? "left" : "right";
}

<title>Survey | @ViewBag.Title</title>
<meta name="viewport" content="width=device-width, initial-scale=1">


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


<link href="https://unpkg.com/survey-jquery/defaultV2.min.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/survey-jquery/survey.jquery.min.js"></script>


<script src="https://unpkg.com/survey-core/survey.i18n.min.js"></script>




<div class="row">
    <div class="col-md-12">
        <div class="portlet box green">
            <div class="portlet-title">
                <div class="caption">
                    @Model.Survey.SurveyTitle
                </div>
            </div>
            <form class="portlet-body form">
                <!-- BEGIN FORM-->
                <div class="form-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div id="surveyContainer"></div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">

    var json = '@Model.SurveyText'.replace(/\\&quot;/g, '\\\'').replace(/\\/g, "").replace(/&quot;/g, '"').replace(/\\/g, "");
    var answerJson = '@Model.AnswerText'.replace(/\\&quot;/g, '\\\'').replace(/\\/g, "").replace(/&quot;/g, '"').replace(/\\/g, "");

    var surveyJson = JSON.parse(json);

    const survey = new Survey.Model(surveyJson);
    survey.data = JSON.parse(answerJson);
    survey.focusFirstQuestionAutomatic = false;
    Survey.surveyLocalization.supportedLocales = ["en", "ar"];

    var selectedLang = getLanguage();
    survey.locale = selectedLang;
    survey.mode = "display";

    $(function () {
        $("#surveyContainer").Survey({ model: survey });
    });

    Survey.setLicenseKey(
        "ZDdhYjZhM2YtYTZjZi00MTI1LWFmYjMtMWI5M2RkYjQ0NDgwOzE9MjAyNC0wOC0zMSwyPTIwMjQtMDgtMzEsND0yMDI0LTA4LTMx"
    );




</script>
